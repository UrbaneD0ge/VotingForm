{"mappings":"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","sources":["app.js"],"sourcesContent":["// const base = require('airtable').base('appotIP5Ss3YUKYYR');\r\nconst submit = document.getElementById('submit');\r\nconst save = document.getElementById('save');\r\nconst table = document.getElementById('table');\r\nlet suffix = document.getElementById('itmType').value;\r\n\r\n// function to store the values of the form in local storage\r\nfunction storeForm() {\r\n  // header inputs\r\n  let NPU = document.getElementById('NPU').selectedOptions[0].value || '';\r\n  let chair = document.querySelector('#chair').value.trim() || '';\r\n  let loc = document.querySelector('#location').value.trim() || '';\r\n  let planner = document.querySelector('#planner').value.trim() || '';\r\n  // save inputs to object\r\n  let data = {\r\n    NPU: NPU,\r\n    chair: chair,\r\n    loc: loc,\r\n    planner: planner,\r\n  };\r\n  // save data to local storage\r\n  localStorage.setItem('data', JSON.stringify(data));\r\n  console.log(data);\r\n}\r\n\r\n// on load, check if there is data in local storage and if so, pre-fill the form\r\nwindow.onload = function () {\r\n  if (localStorage.getItem('data')) {\r\n    let data = JSON.parse(localStorage.getItem('data'));\r\n    document.querySelector('#NPU').value = data.NPU;\r\n    document.querySelector('#chair').value = data.chair;\r\n    document.querySelector('#location').value = data.loc;\r\n    document.querySelector('#planner').value = data.planner;\r\n  };\r\n};\r\n\r\n// on itemType change, preFill the applName\r\ndocument.querySelector('#itmType').addEventListener('change', preFill);\r\n\r\nfunction preFill() {\r\n  switch (document.querySelector('#itmType').value) {\r\n    case 'MOSE':\r\n      applName.setAttribute('placeholder', 'Applicant Name');\r\n      applName.value = ('');\r\n      break;\r\n    case 'LRB':\r\n      applName.setAttribute('placeholder', 'Applicant Name');\r\n      applName.value = ('');\r\n      break;\r\n    case 'ZRB':\r\n      applName.value = 'Z-22-';\r\n      applName.setAttribute('placeholder', 'Z-');\r\n      break;\r\n    case 'SUP':\r\n      applName.value = 'U-22-';\r\n      applName.setAttribute('placeholder', 'U-');\r\n      break;\r\n    case 'BZA':\r\n      applName.value = 'V-22-';\r\n      applName.setAttribute('placeholder', 'V-');\r\n      break;\r\n    case 'Text Amendment':\r\n      applName.value = 'Z-22-';\r\n      applName.setAttribute('placeholder', 'Z-');\r\n      break;\r\n    case 'CDP':\r\n      applName.value = 'CDP-22-';\r\n      applName.setAttribute('placeholder', 'CDP-');\r\n      break;\r\n    case 'SD':\r\n      applName.value = 'SD-22-';\r\n      applName.setAttribute('placeholder', 'SD-')\r\n      break;\r\n    case 'LOR':\r\n      applName.value = 'LOR-22-';\r\n      applName.setAttribute('placeholder', 'LOR-')\r\n      // applName.setAttribute('type', 'number');\r\n      break;\r\n    case 'N/A':\r\n      applName.value = '';\r\n      applName.removeAttribute('placeholder');\r\n      break;\r\n  }\r\n};\r\n\r\n// on submit, add form data to table\r\nsubmit.addEventListener('click', (e) => {\r\n  e.preventDefault();\r\n\r\n  // // Add Item form\r\n  let itmType = document.querySelector('#itmType').selectedOptions[0].value;\r\n  let applName = document.querySelector('#applName').value.trim();\r\n  let disposal = document.querySelector('#disposal').value || '';\r\n  let comments = document.querySelector('#conditions').value.trim() || '';\r\n\r\n\r\n  if (itmType === 'Type' || applName === '') {\r\n    ;\r\n    return;\r\n  }\r\n\r\n  // create table row\r\n  let row = document.createElement('tr');\r\n  // create table cells\r\n  let itmTypeCell = document.createElement('td');\r\n  let deleteButton = document.createElement('button');\r\n  let applNameCell = document.createElement('td');\r\n  let disposalCell = document.createElement('td');\r\n  let commentsCell = document.createElement('td');\r\n  // add text to cells\r\n  itmTypeCell.innerText = itmType;\r\n  itmTypeCell.prepend(deleteButton);\r\n  deleteButton.setAttribute('type', 'button');\r\n  deleteButton.setAttribute('class', 'btn-close');\r\n  applNameCell.textContent = applName;\r\n  applNameCell.setAttribute('contenteditable', 'true');\r\n  applNameCell.classList.add('applName');\r\n  disposalCell.textContent = disposal;\r\n  disposalCell.classList.add('disp');\r\n  commentsCell.textContent = comments;\r\n  commentsCell.classList.add('comments');\r\n\r\n  // wrap each new item in a <tbody>\r\n  let tbody = document.createElement('tbody');\r\n  tbody.append(row);\r\n\r\n  // append new tbody to table\r\n  table.append(tbody);\r\n\r\n  // append cells to row\r\n  row.appendChild(itmTypeCell);\r\n  row.appendChild(applNameCell);\r\n  row.appendChild(disposalCell);\r\n\r\n  if (comments !== '') {\r\n    // create new row for comments\r\n    let commentsRow = document.createElement('tr');\r\n    // create new cell for comments\r\n    // let commentsCell = document.createElement('td')\r\n    commentsCell.setAttribute('colspan', '3');\r\n    commentsCell.setAttribute('contenteditable', 'true');\r\n    commentsCell.classList.add('comments');\r\n    // add text to cell\r\n    commentsCell.textContent = comments;\r\n    // append cell to row\r\n    commentsRow.appendChild(commentsCell);\r\n    // append row to tbody\r\n    tbody.appendChild(commentsRow);\r\n  }\r\n\r\n  console.log('new row added');\r\n  // clear inputs\r\n  document.querySelector('#addItem').reset();\r\n  removeDemo();\r\n}\r\n);\r\n\r\n// on button click, remove that tbody\r\ndocument.querySelector('#table').addEventListener('click', (e) => {\r\n  if (e.target.classList.contains('btn-close')) {\r\n    if (confirm('Are you sure you want to delete this item?')) {\r\n      e.target.parentElement.parentElement.parentElement.remove();\r\n    } else { return; }\r\n  }\r\n}\r\n);\r\n\r\n// remove #demo if it exists\r\nfunction removeDemo() {\r\n  if (document.querySelector('#demo') === null) {\r\n    return;\r\n  } else {\r\n    document.querySelector('#demo').remove();\r\n  }\r\n};\r\n\r\n// on disposalCell click, show select box\r\ndocument.querySelector('#table').addEventListener('click', (e) => {\r\n  if (e.target.classList.contains('disp')) {\r\n    // e.target.setAttribute('contenteditable', 'false');\r\n    e.target.innerHTML = '<select><option value=\"Approval\">Approval</option><option value=\"Approval w/C\">Approval w/C</option><option value=\"Denial\">Denial</option><option value=\"Defer\">Defer</option><option value=\"Abstain\">Abstain</option></select>';\r\n    e.target.firstChild.focus();\r\n  }\r\n  // on blur, change selected value to td text\r\n  e.target.addEventListener('blur', (e) => {\r\n    if (e.target.tagName === 'SELECT') {\r\n      e.target.parentElement.textContent = e.target.value;\r\n    }\r\n  });\r\n});\r\n\r\n// listen for tab key press in applName cells, add new row for comments\r\ndocument.querySelector('#table').addEventListener('keydown', (e) => {\r\n  if (e.target.classList.contains('applName') === true && e.key === 'Tab' && e.target.parentElement.nextElementSibling == null) {\r\n    // create new row for comments\r\n    let commentsRow = document.createElement('tr');\r\n    // create new cell for comments\r\n    let commentsCell = document.createElement('td')\r\n    commentsCell.setAttribute('colspan', '3');\r\n    commentsCell.setAttribute('contenteditable', 'true');\r\n    commentsCell.classList.add('comments');\r\n    // add text to cell\r\n    commentsCell.textContent = '';\r\n    // append cell to row\r\n    commentsRow.appendChild(commentsCell);\r\n    // append row to tbody\r\n    e.target.parentElement.parentElement.appendChild(commentsRow);\r\n  }\r\n}\r\n);\r\n\r\n// Warn before leaving page\r\nwindow.onbeforeunload = function (e) {\r\n  return 'Form contents will be lost!';\r\n};\r\n\r\n// set datepicker to today\r\ntoday = document.querySelector('#date').valueAsDate = new Date();\r\n// date = today.toLocaleDateString().split('/').join('-');\r\n\r\n// on print button click, print page\r\ndocument.querySelector('#print').addEventListener('click', () => {\r\n  // if any dispCell is \"PENDING\", cancel print and highlight cell\r\n  let dispCell = document.querySelectorAll('.disp');\r\n  for (let i = 0; i < dispCell.length; i++) {\r\n    if (dispCell[i].textContent === 'PENDING') {\r\n      dispCell[i].classList.add('highlight');\r\n      return;\r\n    }\r\n  }\r\n  // if no dispCell is \"PENDING\", print page\r\n  window.print();\r\n});\r\n\r\n// // when dispCell selection changes, remove that dispCell highlight\r\n// document.querySelectorAll('.disp').addEventListener('change', (e) => {\r\n//   if (e.target.classList.contains('disp')) {\r\n//     e.target.classList.remove('highlight');\r\n//   }\r\n// }\r\n// );\r\n\r\n// get date from datepicker\r\nlet field = document.querySelector('#date');\r\n\r\n// listen for print event\r\nwindow.addEventListener('beforeprint', () => {\r\n  NPU = document.getElementById('NPU').value;\r\n\r\n  // Get the date\r\n  let date = new Date(`${field.value}T00:00:00`);\r\n  // Format date as MM-DD-YYYY\r\n  let dateString = `${date.getMonth() + 1}-${date.getDate()}-${date.getFullYear()}`;\r\n  console.log(dateString);\r\n\r\n  // change document title\r\n  document.title = `Voting Report_NPU-${NPU}_${dateString}`\r\n  document.querySelector('#header').innerText = `VOTING REPORT: NPU-${NPU}  |  ${dateString}`;\r\n  // Hide instructions, print btn, save btn, report link, and delete item buttons for printing\r\n  document.getElementById('instructions').style.display = 'none';\r\n  document.getElementById('print').style.display = 'none';\r\n  document.getElementById('report').style.display = 'none';\r\n  document.getElementById('save').style.display = 'none';\r\n  document.querySelectorAll('.btn-close').forEach(btn => {\r\n    btn.style.display = 'none';\r\n    document.getElementById('signature').style.display = 'block';\r\n  });\r\n  // if comment cells are empty, remove them\r\n  document.querySelectorAll('td[contenteditable=\"true\"]').forEach(cell => {\r\n    if (cell.textContent === '') {\r\n      cell.parentElement.remove();\r\n    }\r\n  });\r\n  // remove all highlight classes\r\n  document.querySelectorAll('.highlight').forEach(cell => {\r\n    cell.classList.remove('highlight');\r\n  }\r\n  );\r\n});\r\n\r\n// reset title after print\r\nwindow.addEventListener('afterprint', () => {\r\n  document.title = 'Plannerâ€™s Voting Report';\r\n  storeForm();\r\n  document.getElementById('instructions').style.display = 'block';\r\n  document.getElementById('print').style.display = 'block';\r\n  document.getElementById('save').style.display = 'block';\r\n  document.getElementById('report').style.display = 'block';\r\n  document.querySelectorAll('.btn-close').forEach(btn => {\r\n    btn.style.display = 'inline';\r\n  });\r\n  document.getElementById('signature').style.display = 'none';\r\n});\r\n\r\n// send form data to Airtable using API\r\nsave.onClick = () => {\r\n  // get form data\r\n  let formData = {\r\n    fields: {\r\n      NPU: document.getElementById('NPU').value,\r\n      date: document.getElementById('date').value,\r\n      signature: document.getElementById('signature').value,\r\n      comments: document.querySelectorAll('.comments').map(cell => cell.textContent)\r\n    }\r\n  }\r\n  // send form data to Airtable\r\n  fetch('https://api.airtable.com/v0/appotIP5Ss3YUKYYR/Table%201', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'Bearer keyDFa7RNG5otUO3C'\r\n    },\r\n    body: JSON.stringify(formData)\r\n  }).then(response => {\r\n    console.log(response);\r\n  }).catch(error => {\r\n    console.log(error);\r\n  });\r\n}\r\n"],"names":["$4d4f6843d4cf9c81$var$submit","document","getElementById","$4d4f6843d4cf9c81$var$save","$4d4f6843d4cf9c81$var$table","value","window","onload","localStorage","getItem","data","JSON","parse","querySelector","NPU","chair","loc","planner","addEventListener","applName","setAttribute","removeAttribute","e","preventDefault","itmType","selectedOptions","applName1","trim","disposal","comments","row","createElement","itmTypeCell","deleteButton","applNameCell","disposalCell","commentsCell","innerText","prepend","textContent","classList","add","tbody","append","appendChild","commentsRow","console","log","reset","remove","$4d4f6843d4cf9c81$var$removeDemo","target","contains","confirm","parentElement","innerHTML","firstChild","focus","tagName","key","nextElementSibling","onbeforeunload","today","valueAsDate","Date","dispCell","querySelectorAll","i","length","print","$4d4f6843d4cf9c81$var$field","date","dateString","getMonth","getDate","getFullYear","title","style","display","forEach","btn","cell","setItem","stringify","$4d4f6843d4cf9c81$var$storeForm","onClick","formData","fields","signature","map","fetch","method","headers","Authorization","body","then","response","catch","error"],"version":3,"file":"app.js.map"}